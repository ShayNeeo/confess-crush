# README: Giáº£i MÃ£ Kho BÃ¡u Dá»¯ Liá»‡u SÃ n ThÆ°Æ¡ng Máº¡i Äiá»‡n Tá»­ - DAZONE 2025 VÃ²ng 2.2

ChÃ o má»«ng cÃ¡c nhÃ  thÃ¡m hiá»ƒm dá»¯ liá»‡u cá»§a Ä‘á»™i chÃºng ta Ä‘áº¿n vá»›i hÃ nh trÃ¬nh chinh phá»¥c DAZONE 2025! File Python nÃ y chÃ­nh lÃ  la bÃ n vÃ  cuá»‘c xáº»ng Ä‘á»ƒ chÃºng ta khai phÃ¡ nhá»¯ng "má» vÃ ng" thÃ´ng tin tá»« dá»¯ liá»‡u cá»§a má»™t sÃ n thÆ°Æ¡ng máº¡i Ä‘iá»‡n tá»­. Má»¥c tiÃªu cuá»‘i cÃ¹ng? TÃ¬m ra bÃ­ máº­t giá»¯ chÃ¢n khÃ¡ch hÃ ng vÃ  chiáº¿n tháº¯ng cuá»™c thi! ğŸš€

## Má»¥c Lá»¥c

1.  [Bá»‘i Cáº£nh Cuá»™c ThÃ¡m Hiá»ƒm: SÃ n ThÆ°Æ¡ng Máº¡i Äiá»‡n Tá»­ vÃ  Thá»­ ThÃ¡ch DAZONE](#bá»‘i-cáº£nh-cuá»™c-thÃ¡m-hiá»ƒm-sÃ n-thÆ°Æ¡ng-máº¡i-Ä‘iá»‡n-tá»­-vÃ -thá»­-thÃ¡ch-dazone)
2.  [CÃ¡ch Váº­n HÃ nh "Cá»— MÃ¡y Khai KhoÃ¡ng" (CÃ¡ch Cháº¡y Script)](#cÃ¡ch-váº­n-hÃ nh-cá»—-mÃ¡y-khai-khoÃ¡ng-cÃ¡ch-cháº¡y-script)
3.  [Báº£n Thiáº¿t Káº¿ "Cá»— MÃ¡y" (Cáº¥u TrÃºc Script Chi Tiáº¿t)](#báº£n-thiáº¿t-káº¿-cá»—-mÃ¡y-cáº¥u-trÃºc-script-chi-tiáº¿t)
    * [Giai Äoáº¡n 1: Gom GÃ³p "Äáº¥t ÄÃ¡" vÃ  Chuáº©n Bá»‹ "Dá»¥ng Cá»¥"](#giai-Ä‘oáº¡n-1-gom-gÃ³p-Ä‘áº¥t-Ä‘Ã¡-vÃ -chuáº©n-bá»‹-dá»¥ng-cá»¥)
    * [Giai Äoáº¡n 2: "Luyá»‡n Kim" vÃ  "Thá»­ VÃ ng" (Huáº¥n Luyá»‡n & ÄÃ¡nh GiÃ¡ Model)](#giai-Ä‘oáº¡n-2-luyá»‡n-kim-vÃ -thá»­-vÃ ng-huáº¥n-luyá»‡n--Ä‘Ã¡nh-giÃ¡-model)
    * [Giai Äoáº¡n 3: "Cháº¿ TÃ¡c Trang Sá»©c" vÃ  "TrÆ°ng BÃ y" (PhÃ¢n TÃ­ch SÃ¢u & Ká»ƒ Chuyá»‡n)](#giai-Ä‘oáº¡n-3-cháº¿-tÃ¡c-trang-sá»©c-vÃ -trÆ°ng-bÃ y-phÃ¢n-tÃ­ch-sÃ¢u--ká»ƒ-chuyá»‡n)
4.  [Äá»‘i Chiáº¿u Vá»›i "Báº£ng VÃ ng" Ban GiÃ¡m Kháº£o (Barem Cháº¥m Äiá»ƒm DAZONE 2025)](#Ä‘á»‘i-chiáº¿u-vá»›i-báº£ng-vÃ ng-ban-giÃ¡m-kháº£o-barem-cháº¥m-Ä‘iá»ƒm-dazone-2025)
5.  [Nhá»¯ng "ViÃªn Kim CÆ°Æ¡ng" NÃªn "ÄÃ¡nh BÃ³ng" Cho Buá»•i TrÃ¬nh BÃ y (Gá»£i Ã Trá»±c Quan HÃ³a)](#nhá»¯ng-viÃªn-kim-cÆ°Æ¡ng-nÃªn-Ä‘Ã¡nh-bÃ³ng-cho-buá»•i-trÃ¬nh-bÃ y-gá»£i-Ã½-trá»±c-quan-hÃ³a)
6.  [Lá»i Dáº·n DÃ² Tá»« "TrÆ°á»Ÿng ÄoÃ n ThÃ¡m Hiá»ƒm"](#lá»i-dáº·n-dÃ²-tá»«-trÆ°á»Ÿng-Ä‘oÃ n-thÃ¡m-hiá»ƒm)

## Bá»‘i Cáº£nh Cuá»™c ThÃ¡m Hiá»ƒm: SÃ n ThÆ°Æ¡ng Máº¡i Äiá»‡n Tá»­ vÃ  Thá»­ ThÃ¡ch DAZONE

TÆ°á»Ÿng tÆ°á»£ng chÃºng ta Ä‘ang lÃ m viá»‡c cho má»™t sÃ n thÆ°Æ¡ng máº¡i Ä‘iá»‡n tá»­ lá»›n. SÃ n cÃ³ ráº¥t nhiá»u khÃ¡ch hÃ ng vÃ  vÃ´ vÃ n sáº£n pháº©m. Má»™t cÃ¢u há»i lá»›n mÃ  sáº¿p Ä‘áº·t ra lÃ : "LÃ m sao Ä‘á»ƒ biáº¿t khÃ¡ch hÃ ng nÃ o sáº½ tiáº¿p tá»¥c mua sáº¯m vá»›i chÃºng ta, cá»¥ thá»ƒ lÃ  vá»›i má»™t gian hÃ ng há» tá»«ng mua, trong 6 thÃ¡ng tá»›i?" [cite: 909, 911] ÄÃ¢y chÃ­nh lÃ  "kho bÃ¡u" mÃ  cuá»™c thi DAZONE 2025 VÃ²ng 2.2 yÃªu cáº§u chÃºng ta tÃ¬m kiáº¿m. [cite: 895]

"Cá»— mÃ¡y khai khoÃ¡ng" (script Python) nÃ y sáº½ giÃºp chÃºng ta:
1.  **SÃ ng lá»c "Ä‘áº¥t Ä‘Ã¡"**: LÃ m sáº¡ch vÃ  chuáº©n bá»‹ dá»¯ liá»‡u giao dá»‹ch, thÃ´ng tin ngÆ°á»i dÃ¹ng. [cite: 946]
2.  **Cháº¿ táº¡o "mÃ¡y dÃ² vÃ ng"**: XÃ¢y dá»±ng cÃ¡c mÃ´ hÃ¬nh (model) dá»± Ä‘oÃ¡n kháº£ nÄƒng khÃ¡ch hÃ ng quay láº¡i. [cite: 925, 949]
3.  **Thá»­ nghiá»‡m "mÃ¡y dÃ²"**: ÄÃ¡nh giÃ¡ xem "mÃ¡y dÃ²" nÃ o hoáº¡t Ä‘á»™ng tá»‘t nháº¥t. [cite: 926]
4.  **PhÃ¢n loáº¡i "vÃ ng"**: Chia khÃ¡ch hÃ ng thÃ nh tá»«ng nhÃ³m (phÃ¢n khÃºc) Ä‘á»ƒ hiá»ƒu rÃµ hÆ¡n vá» há». [cite: 951]
5.  **Äá» xuáº¥t "chiáº¿n lÆ°á»£c khai thÃ¡c"**: ÄÆ°a ra nhá»¯ng gá»£i Ã½ kinh doanh thÃ´ng minh dá»±a trÃªn nhá»¯ng gÃ¬ tÃ¬m Ä‘Æ°á»£c. [cite: 953, 981]

## CÃ¡ch Váº­n HÃ nh "Cá»— MÃ¡y Khai KhoÃ¡ng" (CÃ¡ch Cháº¡y Script)

Äá»ƒ "cá»— mÃ¡y" nÃ y hoáº¡t Ä‘á»™ng, Ä‘á»™i cá»§a chÃºng ta cáº§n:
1.  **"XÆ°á»Ÿng cháº¿ táº¡o" (MÃ´i trÆ°á»ng):** MÃ¡y tÃ­nh cÃ³ cÃ i Python vÃ  cÃ¡c "phá»¥ tÃ¹ng" (thÆ° viá»‡n) nhÆ° `pandas`, `numpy`, `matplotlib`, `seaborn`, `scikit-learn` (cho cÃ¡c model, scaler), `imblearn` (cho SMOTE), `xgboost`, `lightgbm` (cho cÃ¡c model máº¡nh), vÃ  `shap` (Ä‘á»ƒ hiá»ƒu model).
2.  **"Nguá»“n quáº·ng" (Dá»¯ liá»‡u Ä‘áº§u vÃ o):** CÃ¡c file CSV Ä‘Ã£ Ä‘Æ°á»£c xá»­ lÃ½ á»Ÿ vÃ²ng trÆ°á»›c hoáº·c tá»« script `data_cleaning.py`, náº±m trong thÆ° má»¥c `cleaning_results/cleaned_data/`:
    * `competition_train_features.csv`: Dá»¯ liá»‡u huáº¥n luyá»‡n chÃ­nh, Ä‘Ã£ cÃ³ sáºµn nhiá»u "Ä‘áº·c Ä‘iá»ƒm" (features) cá»§a khÃ¡ch hÃ ng.
    * `competition_test_features.csv`: Dá»¯ liá»‡u Ä‘á»ƒ "thá»­ thÃ¡ch" model, cáº¥u trÃºc tÆ°Æ¡ng tá»± file train.
    * `cleaned_user_info.csv`: ThÃ´ng tin chi tiáº¿t vá» ngÆ°á»i dÃ¹ng (tuá»•i, giá»›i tÃ­nh, nghá» nghiá»‡p,...).
3.  **Khá»Ÿi Ä‘á»™ng "cá»— mÃ¡y"**: Cháº¡y file Python `DAZONE2025_R2.2_Main_Analysis.py`.
4.  **"ThÃ nh pháº©m" (Káº¿t quáº£):** Má»i thá»© "khai thÃ¡c" Ä‘Æ°á»£c sáº½ náº±m trong thÆ° má»¥c `round_2.2`:
    * `model_outputs`: CÃ¡c "mÃ¡y dÃ² vÃ ng" (model) tá»‘t nháº¥t Ä‘Ã£ Ä‘Æ°á»£c lÆ°u láº¡i.
    * `segmentation_outputs`: ThÃ´ng tin chi tiáº¿t vá» cÃ¡c nhÃ³m khÃ¡ch hÃ ng vÃ  "chÃ¢n dung" (persona) cá»§a há».
    * `shap_outputs`: CÃ¡c file giáº£i thÃ­ch cÃ¡ch "mÃ¡y dÃ²" Ä‘Æ°a ra quyáº¿t Ä‘á»‹nh.
    * `visualizations_from_main_analysis`: Ráº¥t nhiá»u biá»ƒu Ä‘á»“, hÃ¬nh áº£nh minh há»a cho tá»«ng bÆ°á»›c.
    * `logs`: "Sá»• nháº­t kÃ½" ghi láº¡i toÃ n bá»™ quÃ¡ trÃ¬nh "khai khoÃ¡ng".

## Báº£n Thiáº¿t Káº¿ "Cá»— MÃ¡y" (Cáº¥u TrÃºc Script Chi Tiáº¿t)

"Cá»— mÃ¡y" cá»§a chÃºng ta cÃ³ 3 bá»™ pháº­n chÃ­nh, hoáº¡t Ä‘á»™ng tuáº§n tá»±.

### Giai Äoáº¡n 1: Gom GÃ³p "Äáº¥t ÄÃ¡" vÃ  Chuáº©n Bá»‹ "Dá»¥ng Cá»¥"

ÄÃ¢y lÃ  bÆ°á»›c chuáº©n bá»‹ ná»n táº£ng, Ä‘áº£m báº£o má»i thá»© sáºµn sÃ ng.

* **Khai BÃ¡o "Dá»¥ng Cá»¥" (Import Libraries):** Gá»i tÃªn táº¥t cáº£ cÃ¡c thÆ° viá»‡n cáº§n thiáº¿t.
* **Thiáº¿t Láº­p "CÃ´ng TrÆ°á»ng" (Configuration):**
    * `DEVELOPMENT_MODE`: Cháº¿ Ä‘á»™ "cháº¡y thá»­" (`True`) Ä‘á»ƒ nhanh cÃ³ káº¿t quáº£ vá»›i Ã­t dá»¯ liá»‡u, hoáº·c "cháº¡y tháº­t" (`False`) vá»›i toÃ n bá»™ dá»¯ liá»‡u. Log gáº§n nháº¥t cá»§a chÃºng ta lÃ  `False`.
    * `PRODUCTION_TIER`: Khi "cháº¡y tháº­t", chá»n má»©c Ä‘á»™ "Ä‘Ã o sÃ¢u" (1: nhanh hÆ¡n, 2: ká»¹ hÆ¡n, lÃ¢u hÆ¡n). Log gáº§n nháº¥t lÃ  `2`.
    * `RANDOM_STATE`: Má»™t con sá»‘ (vÃ­ dá»¥: `9` nhÆ° trong log, hoáº·c `42` nhÆ° trong script gá»‘c) Ä‘á»ƒ Ä‘áº£m báº£o cÃ¡c bÆ°á»›c ngáº«u nhiÃªn (nhÆ° chia dá»¯ liá»‡u, khá»Ÿi táº¡o model) cho káº¿t quáº£ giá»‘ng nhau má»—i láº§n cháº¡y, giÃºp dá»… dÃ ng kiá»ƒm tra vÃ  so sÃ¡nh.
    * `K_SELECTION_METHOD`: CÃ¡ch chá»n sá»‘ cá»¥m `k` cho K-Means ("silhouette" hoáº·c "elbow"). Log gáº§n nháº¥t lÃ  `silhouette`.
    * MÃ u sáº¯c (`PRIMARY_RED_THEME`): Chá»n mÃ u Ä‘á» lÃ m chá»§ Ä‘áº¡o cho cÃ¡c biá»ƒu Ä‘á»“.
* **Táº¡o CÃ¡c "Kho Chá»©a" (Output Directory Setup):** Táº¡o cÃ¡c thÆ° má»¥c Ä‘á»ƒ lÆ°u káº¿t quáº£.
* **Ghi "Sá»• Tay CÃ´ng TrÆ°á»ng" (Logging Setup):** Thiáº¿t láº­p Ä‘á»ƒ ghi láº¡i má»i hoáº¡t Ä‘á»™ng.
* **Thu Tháº­p "Äáº¥t ÄÃ¡ ThÃ´" (Load Data):**
    * HÃ m `load_data` sáº½ Ä‘á»c dá»¯ liá»‡u tá»« cÃ¡c file CSV.
    * Dá»¯ liá»‡u Ä‘Æ°á»£c láº¥y máº«u náº¿u á»Ÿ `DEVELOPMENT_MODE`.
* **"SÆ¡ Kháº£o Äá»‹a Cháº¥t" (Initial Data Exploration):**
    * Váº½ biá»ƒu Ä‘á»“ trÃ²n thá»ƒ hiá»‡n tá»· lá»‡ khÃ¡ch hÃ ng quay láº¡i vÃ  khÃ´ng quay láº¡i (`label`) trong táº­p huáº¥n luyá»‡n. GiÃºp hiá»ƒu sá»± máº¥t cÃ¢n báº±ng cá»§a dá»¯ liá»‡u.
* **"Tinh Cháº¿ Quáº·ng" SÆ¡ Bá»™ (Data Preparation for Modeling):**
    * HÃ m `preprocess_for_modeling`: "Lá»c rá»­a" dá»¯ liá»‡u láº§n cuá»‘i.
        * **Xá»­ lÃ½ ngÃ y thÃ¡ng:** Bá» cÃ¡c cá»™t ngÃ y thÃ¡ng thÃ´ (vÃ¬ Ä‘Ã£ cÃ³ features Ä‘Æ°á»£c táº¡o tá»« ngÃ y thÃ¡ng nhÆ° `interaction_span_days`).
        * **Äiá»n giÃ¡ trá»‹ rá»—ng (NaN):** Vá»›i cá»™t sá»‘, Ä‘iá»n 0 cho cÃ¡c cá»™t Ä‘áº¿m/cá», Ä‘iá»n trung vá»‹ (median) cho cÃ¡c cá»™t khÃ¡c. Cá»™t chá»¯/category Ä‘iá»n "Unknown".
        * **MÃ£ hÃ³a chá»¯ thÃ nh sá»‘ (Label Encoding):** Chuyá»ƒn cÃ¡c cá»™t dáº¡ng chá»¯ (vÃ­ dá»¥ `sex`, `age_group`) thÃ nh dáº¡ng sá»‘ mÃ  model hiá»ƒu Ä‘Æ°á»£c. LÆ°u láº¡i "báº£ng mÃ£" (`label_encoders`) Ä‘á»ƒ Ã¡p dá»¥ng nháº¥t quÃ¡n cho cáº£ táº­p train vÃ  test.
        * **Xá»­ lÃ½ vÃ´ cá»±c (Inf):** Chuyá»ƒn thÃ nh NaN rá»“i xá»­ lÃ½.
    * **PhÃ¢n chia "Khu Vá»±c Khai ThÃ¡c" (Train/Validation Split):** Chia táº­p train thÃ nh 2 pháº§n: `X_train` (Ä‘á»ƒ dáº¡y model) vÃ  `X_val` (Ä‘á»ƒ kiá»ƒm tra model). `y_train` vÃ  `y_val` lÃ  "Ä‘Ã¡p Ã¡n" tÆ°Æ¡ng á»©ng.
    * **"Äá»“ng Bá»™ HÃ³a KÃ­ch Cá»¡" (StandardScaler):** ÄÆ°a cÃ¡c features sá»‘ vá» cÃ¹ng má»™t thang Ä‘o, trÃ¡nh feature nÃ o cÃ³ giÃ¡ trá»‹ lá»›n "Ã¡t vÃ­a" feature khÃ¡c.
    * **"TÄƒng CÆ°á»ng Lá»±c LÆ°á»£ng" Cho NhÃ³m Yáº¿u Tháº¿ (SMOTE):** Náº¿u nhÃ³m khÃ¡ch hÃ ng quay láº¡i (`label=1`) quÃ¡ Ã­t, SMOTE sáº½ táº¡o thÃªm cÃ¡c "báº£n sao thÃ´ng minh" cá»§a há» trong táº­p `X_train_smote`, `y_train_smote` Ä‘á»ƒ model há»c tá»‘t hÆ¡n vá» nhÃ³m nÃ y. **Log cá»§a báº¡n cho tháº¥y SMOTE Ä‘Ã£ Ä‘Æ°á»£c Ã¡p dá»¥ng.**
* **Chuáº©n Bá»‹ "MÃ¡y DÃ²" Sáºµn (Model Options Storage):**
    * Trong "Modeling Option 1", chÃºng ta Ä‘Ã£ chuáº©n bá»‹ sáºµn cÃ¡c "mÃ¡y dÃ²" (model) `LightGBM_Opt1`, `RandomForest_Opt1`, vÃ  theo yÃªu cáº§u má»›i nháº¥t lÃ  cáº£ `XGBoost_Opt1` vÃ  `LogisticRegression_Opt1`, má»—i loáº¡i vá»›i bá»™ "phá»¥ tÃ¹ng" (tham sá»‘) riÃªng tÃ¹y theo `DEVELOPMENT_MODE` hoáº·c `PRODUCTION_TIER`. Log cho tháº¥y Ä‘iá»u nÃ y Ä‘Ã£ Ä‘Æ°á»£c thá»±c hiá»‡n.
* **Giá»¯ Gá»n "CÃ´ng TrÆ°á»ng" (Memory Management):**
    * LÆ°u `X_train_scaled` (dá»¯ liá»‡u gá»‘c, chÆ°a SMOTE) Ä‘á»ƒ dÃ¹ng cho Hyperparameter Tuning, nháº±m chá»‘ng overfitting. Log xÃ¡c nháº­n: `Preserving X_train_scaled ... for hyperparameter tuning`.

### Giai Äoáº¡n 2: "Luyá»‡n Kim" vÃ  "Thá»­ VÃ ng" (Huáº¥n Luyá»‡n & ÄÃ¡nh GiÃ¡ Model)

ÄÃ¢y lÃ  trÃ¡i tim cá»§a "cá»— mÃ¡y", nÆ¡i cÃ¡c "mÃ¡y dÃ² vÃ ng" Ä‘Æ°á»£c cháº¿ táº¡o vÃ  kiá»ƒm tra.

* **HÃ m "GiÃ¡m Äá»‹nh Cháº¥t LÆ°á»£ng VÃ ng" (`evaluate_model_performance`):**
    * DÃ¹ng Ä‘á»ƒ huáº¥n luyá»‡n má»™t model trÃªn dá»¯ liá»‡u Ä‘Æ°á»£c cung cáº¥p (thÆ°á»ng lÃ  `X_train_smote`, `y_train_smote` cho Ä‘Ã¡nh giÃ¡ ban Ä‘áº§u).
    * Dá»± Ä‘oÃ¡n trÃªn `X_val_scaled` (dá»¯ liá»‡u kiá»ƒm tra chÆ°a tá»«ng tháº¥y).
    * TÃ­nh cÃ¡c chá»‰ sá»‘ "Ä‘á»™ tinh khiáº¿t" cá»§a "vÃ ng" (metrics): AUC-ROC, F1-Score, Log Loss, Brier Score, Precision, Recall cho lá»›p "quay láº¡i".
    * Váº½ "Ma tráº­n nháº§m láº«n": Xem model nháº§m á»Ÿ Ä‘Ã¢u.

* **Luá»“ng Cháº¿ Táº¡o vÃ  Thá»­ Nghiá»‡m "MÃ¡y DÃ²" (Model Pipeline):**
    * **Pipeline Tá»•ng QuÃ¡t cho má»—i láº§n Ä‘Ã¡nh giÃ¡ ban Ä‘áº§u:**
        ```mermaid
        graph LR
            A[Dá»¯ liá»‡u Ä‘Ã£ sÆ¡ cháº¿ tá»« GÄ1] --> B(SMOTE: CÃ¢n báº±ng dá»¯ liá»‡u huáº¥n luyá»‡n);
            B --> C[Huáº¥n luyá»‡n "MÃ¡y DÃ²" trÃªn X_train_smote];
            C --> D[ÄÃ¡nh giÃ¡ "MÃ¡y DÃ²" trÃªn X_val_scaled];
            D --> E[Káº¿t quáº£: Äiá»ƒm sá»‘ & Biá»ƒu Ä‘á»“];
        ```
    * **Pipeline cho Hyperparameter Tuning (Tinh chá»‰nh "MÃ¡y DÃ²"):**
        ```mermaid
        graph LR
            A[Dá»¯ liá»‡u X_train_scaled, y_train gá»‘c tá»« GÄ1] --> B(RandomizedSearchCV tÃ¬m cáº¥u hÃ¬nh tá»‘t nháº¥t);
            B -- Sá»­ dá»¥ng Class Weight hoáº·c Scale Pos Weight --> C[Huáº¥n luyá»‡n "MÃ¡y DÃ²" Ä‘Ã£ tinh chá»‰nh trÃªn X_train_smote];
            C --> D[ÄÃ¡nh giÃ¡ "MÃ¡y DÃ²" Ä‘Ã£ tinh chá»‰nh trÃªn X_val_scaled];
            D --> E[Káº¿t quáº£: Model hiá»‡u quáº£ hÆ¡n?];
        ```

* **Hai Lá»±a Chá»n "Khai ThÃ¡c VÃ ng":**

    * **Lá»±a Chá»n 1: ÄÃ o SÃ¢u á» Nhá»¯ng "Má» Lá»›n" ÄÃ£ Biáº¿t (Opt1 Models)**
        * *Má»¥c tiÃªu:* Kiá»ƒm tra nhanh hiá»‡u suáº¥t cá»§a má»™t sá»‘ "mÃ¡y dÃ²" máº¡nh máº½ (`LightGBM_Opt1`, `RandomForest_Opt1`, `XGBoost_Opt1`, `LogisticRegression_Opt1`) vá»›i cÃ¡c cáº¥u hÃ¬nh ban Ä‘áº§u Ä‘Ã£ Ä‘Æ°á»£c thiáº¿t láº­p sáºµn cho tá»«ng `DEVELOPMENT_MODE` / `PRODUCTION_TIER`.
        * *Log cá»§a báº¡n cho tháº¥y cáº£ 4 model nÃ y Ä‘á»u Ä‘Ã£ Ä‘Æ°á»£c huáº¥n luyá»‡n vÃ  Ä‘Ã¡nh giÃ¡ trÃªn `X_train_smote` vÃ  `X_val_scaled`.*

    * **Lá»±a Chá»n 2: "Tuyá»ƒn Chá»n Thá»£ Má»" Giá»i Nháº¥t (Comp Models - Comparative Analysis)**
        * *Má»¥c tiÃªu:* Tá»• chá»©c má»™t "cuá»™c thi" cho nhiá»u loáº¡i "mÃ¡y dÃ²" khÃ¡c nhau (`LogisticRegression_Comp`, `RandomForest_Comp`, `XGBoost_Comp`, `LightGBM_Comp`, `LinearSVC_Comp`, `MLPClassifier_Comp`) Ä‘á»ƒ xem loáº¡i nÃ o cÃ³ tiá»m nÄƒng nháº¥t trÃªn dá»¯ liá»‡u `X_train_smote`.
        * *Log cá»§a báº¡n cho tháº¥y táº¥t cáº£ cÃ¡c model nÃ y cÅ©ng Ä‘Ã£ Ä‘Æ°á»£c huáº¥n luyá»‡n vÃ  Ä‘Ã¡nh giÃ¡.*

* **"Báº£ng Phong Tháº§n" (Model Comparison Summary):**
    * Tá»•ng há»£p Ä‘iá»ƒm sá»‘ AUC-ROC, F1, Precision, Recall, LogLoss, Brier Score cá»§a táº¥t cáº£ cÃ¡c model Ä‘Ã£ thá»­ nghiá»‡m (cáº£ Opt1 vÃ  Comp).
    * Log cá»§a báº¡n cho tháº¥y `MLPClassifier_Comp` (AUC 0.6084) lÃ  model tá»‘t nháº¥t trÆ°á»›c khi tuning trong láº§n cháº¡y nÃ y.

* **Chá»n "Thá»£ Má» VÃ´ Äá»‹ch" (Best Model Before Tuning):** Dá»±a vÃ o AUC-ROC, `MLPClassifier_Comp` Ä‘Æ°á»£c chá»n.

* **"RÃ¨n Láº¡i CÃ´ng Cá»¥" Cho "Thá»£ Má» VÃ´ Äá»‹ch" (Hyperparameter Tuning):**
    * *Má»¥c tiÃªu:* Tinh chá»‰nh cÃ¡c "á»‘c vÃ­t" (siÃªu tham sá»‘) cá»§a nhá»¯ng "thá»£ má»" (model) tiá»m nÄƒng nháº¥t Ä‘á»ƒ há» lÃ m viá»‡c hiá»‡u quáº£ hÆ¡n ná»¯a.
    * Script cá»§a báº¡n Ä‘Ã£ chá»n `MLPClassifier_Comp` vÃ  `RandomForest_Comp` (top 2 model cÃ³ base name khÃ¡c nhau trong `PRODUCTION_TIER = 2`) Ä‘á»ƒ tuning.
    * **Cáº£i tiáº¿n quan trá»ng:** Tuning Ä‘Æ°á»£c thá»±c hiá»‡n trÃªn `X_train_scaled` vÃ  `y_train` gá»‘c, Ä‘á»“ng thá»i model Ä‘Æ°á»£c truyá»n tham sá»‘ xá»­ lÃ½ máº¥t cÃ¢n báº±ng (nhÆ° `class_weight` cho RF hoáº·c `scale_pos_weight` Ä‘Æ°á»£c tÃ­nh cho XGB/LGBM, MLP) Ä‘á»ƒ chá»‘ng overfitting trong quÃ¡ trÃ¬nh cross-validation.
    * `RandomizedSearchCV` Ä‘Æ°á»£c dÃ¹ng Ä‘á»ƒ thá»­ cÃ¡c bá»™ "á»‘c vÃ­t" khÃ¡c nhau.
    * **Káº¿t quáº£ tuning trong log:**
        * `RandomForest_Comp_Tuned`: CV AUC 0.6463, Validation AUC **0.6279**. (Cáº£i thiá»‡n so vá»›i RF_Comp gá»‘c 0.6071)
        * `MLPClassifier_Comp_Tuned`: CV AUC 0.6362, Validation AUC **0.6097**. (Cáº£i thiá»‡n nháº¹ so vá»›i MLP_Comp gá»‘c 0.6084)
    * CV ROC-AUC cá»§a cáº£ hai model Ä‘Ã£ tuned (0.6463 vÃ  0.6362) Ä‘á»u ráº¥t há»£p lÃ½ vÃ  gáº§n vá»›i validation AUC, cho tháº¥y **váº¥n Ä‘á» overfitting trong tuning Ä‘Ã£ Ä‘Æ°á»£c kiá»ƒm soÃ¡t tá»‘t.**

* **"CÃ´ng Cá»¥ Tá»‘i ThÆ°á»£ng" (Final Best Model):**
    * `RandomForest_Comp_Tuned` (AUC 0.6279) Ä‘Æ°á»£c chá»n lÃ m model tá»‘t nháº¥t cuá»‘i cÃ¹ng.
    * Model nÃ y Ä‘Æ°á»£c lÆ°u láº¡i.
* **"Nhá»¯ng MÅ©i Khoan Quan Trá»ng Nháº¥t" (Feature Importance):**
    * Biá»ƒu Ä‘á»“ Ä‘á»™ quan trá»ng cá»§a cÃ¡c "mÅ©i khoan" (Ä‘áº·c trÆ°ng) cho model tá»‘t nháº¥t Ä‘Æ°á»£c váº½.

### Giai Äoáº¡n 3: "Cháº¿ TÃ¡c Trang Sá»©c" vÃ  "TrÆ°ng BÃ y" (PhÃ¢n TÃ­ch SÃ¢u & Ká»ƒ Chuyá»‡n)

Sau khi cÃ³ "mÃ¡y dÃ² vÃ ng" tá»‘t nháº¥t, chÃºng ta sáº½ tÃ¬m hiá»ƒu xem nÃ³ "nghÄ©" gÃ¬ vÃ  "vÃ ng" cá»§a chÃºng ta cÃ³ nhá»¯ng loáº¡i nÃ o.

* **I. "Äá»c Vá»‹ MÃ¡y DÃ²" (SHAP Analysis):**
    * Sá»­ dá»¥ng thÆ° viá»‡n `shap` Ä‘á»ƒ "giáº£i mÃ£" model `RandomForest_Comp_Tuned`.
    * SHAP cho biáº¿t má»—i "Ä‘áº·c Ä‘iá»ƒm" (feature) cá»§a khÃ¡ch hÃ ng áº£nh hÆ°á»Ÿng Ä‘áº¿n quyáº¿t Ä‘á»‹nh "quay láº¡i" hay "khÃ´ng quay láº¡i" cá»§a model nhÆ° tháº¿ nÃ o.
    * Log cho tháº¥y cÃ¡c features quan trá»ng nháº¥t theo SHAP lÃ  `days_since_last_interaction`, `sex`, `unique_categories`, `purchase_rate`, `age`.
* **II. "PhÃ¢n Loáº¡i VÃ ng" (User Segmentation - K-Means Clustering):**
    * *Má»¥c tiÃªu:* Gom nhá»¯ng khÃ¡ch hÃ ng cÃ³ hÃ nh vi tÆ°Æ¡ng tá»± nhau thÃ nh tá»«ng "hÅ© vÃ ng" (cá»¥m) riÃªng.
    * **Chuáº©n bá»‹ "vÃ ng" Ä‘á»ƒ phÃ¢n loáº¡i:** Láº¥y cÃ¡c Ä‘áº·c trÆ°ng hÃ nh vi vÃ  nhÃ¢n kháº©u há»c á»Ÿ cáº¥p Ä‘á»™ ngÆ°á»i dÃ¹ng.
    * **Chá»n Sá»‘ "HÅ© VÃ ng" (`optimal_k`):**
        * Script Ä‘Æ°á»£c cáº¥u hÃ¬nh dÃ¹ng `K_SELECTION_METHOD = "silhouette"`.
        * TÃ­nh Silhouette score cho `k` tá»« 2 Ä‘áº¿n 7. Log cho tháº¥y:
            * k=2: Sil = 0.156
            * k=3: Sil = 0.185
            * k=4: Sil = **0.190** (lÃ m trÃ²n tá»« 0.1897 - cao nháº¥t)
            * k=5: Sil = 0.131
            * k=6: Sil = 0.125
            * k=7: Sil = 0.111
        * Script Ä‘Ã£ **chá»n chÃ­nh xÃ¡c `optimal_k=4`** dá»±a trÃªn Silhouette score cao nháº¥t.
    * **Chia "vÃ ng" vÃ o "hÅ©" (Cháº¡y K-Means):** Sá»­ dá»¥ng `k=4` Ä‘á»ƒ phÃ¢n cá»¥m.
    * **MÃ´ Táº£ "VÃ ng" Trong Tá»«ng "HÅ©" (Cluster Profiling):** Xem xÃ©t Ä‘áº·c Ä‘iá»ƒm trung bÃ¬nh cá»§a khÃ¡ch hÃ ng trong má»—i cá»¥m.
* **III. "DÃ¡n NhÃ£n Cho Tá»«ng HÅ© VÃ ng" (Persona Assignment):**
    * Dá»±a trÃªn Ä‘áº·c Ä‘iá»ƒm cá»§a má»—i cá»¥m, Ä‘áº·t cho chÃºng nhá»¯ng cÃ¡i tÃªn "kÃªu kÃªu" (persona) nhÆ° "ğŸŒŸğŸ‘‘ VIP Champions", "ğŸ’” Dormant & High Churn Risk", v.v.
    * Log cho tháº¥y 4 persona Ä‘Ã£ Ä‘Æ°á»£c gÃ¡n cho 4 cá»¥m.
* **IV. "Khai ThÃ¡c GiÃ¡ Trá»‹ Tá»« Má» VÃ ng" (Business Insights & Recommendations):**
    * Tá»•ng há»£p nhá»¯ng phÃ¡t hiá»‡n quan trá»ng tá»« model dá»± Ä‘oÃ¡n, SHAP, vÃ  cÃ¡c persona.
    * Äá» xuáº¥t cÃ¡c chiáº¿n lÆ°á»£c kinh doanh cá»¥ thá»ƒ cho tá»«ng nhÃ³m khÃ¡ch hÃ ng.
    * PhÃ¡c há»a "ChÃ¢n Dung KhÃ¡ch HÃ ng VÃ ng" (Ideal Customer Profile - ICP).
* **V. Tá»•ng Káº¿t vÃ  "Káº¿ Hoáº¡ch Má»Ÿ Rá»™ng Má»" (Final Summary & Next Steps).**

## Äá»‘i Chiáº¿u Vá»›i "Báº£ng VÃ ng" Ban GiÃ¡m Kháº£o (Barem Cháº¥m Äiá»ƒm DAZONE 2025)

PhiÃªn báº£n script nÃ y Ä‘Ã£ cÃ³ nhá»¯ng cáº£i tiáº¿n Ä‘Ã¡ng ká»ƒ vÃ  Ä‘Ã¡p á»©ng tá»‘t hÆ¡n cÃ¡c tiÃªu chÃ­:

1.  **Forecasting & Model Evaluation (30%):**
    * **Script lÃ m Ä‘Æ°á»£c:** Nhiá»u model Ä‘Æ°á»£c thá»­ nghiá»‡m (Opt1 vÃ  Opt2). CÃ³ so sÃ¡nh, cÃ³ metrics Ä‘áº§y Ä‘á»§. Hyperparameter tuning Ä‘Æ°á»£c thá»±c hiá»‡n vÃ  **váº¥n Ä‘á» overfitting trong CV Ä‘Ã£ Ä‘Æ°á»£c kiá»ƒm soÃ¡t tá»‘t hÆ¡n nhiá»u**. Logic chá»n model tá»‘t nháº¥t rÃµ rÃ ng.
    * **Cháº¥m Ä‘iá»ƒm (Æ°á»›c lÆ°á»£ng):** 70-85%. Äá»ƒ Ä‘áº¡t Ä‘iá»ƒm cao hÆ¡n, cÃ³ thá»ƒ thá»­ nghiá»‡m cÃ¡c ká»¹ thuáº­t ensemble phá»©c táº¡p hÆ¡n, hoáº·c phÃ¢n tÃ­ch sÃ¢u hÆ¡n vá» learning curve cá»§a model cuá»‘i cÃ¹ng.

2.  **User Segmentation & Personalization Strategy (25%):**
    * **Script lÃ m Ä‘Æ°á»£c:** K-Means Ä‘Æ°á»£c sá»­ dá»¥ng. `optimal_k` Ä‘Æ°á»£c chá»n má»™t cÃ¡ch linh hoáº¡t (láº§n nÃ y lÃ  Silhouette). CÃ³ profiling vÃ  gÃ¡n persona. CÃ¡c Ä‘á» xuáº¥t chiáº¿n lÆ°á»£c Ä‘Ã£ báº¯t Ä‘áº§u hÃ¬nh thÃ nh.
    * **Cháº¥m Ä‘iá»ƒm (Æ°á»›c lÆ°á»£ng):** 65-80%. Äá»ƒ tá»‘i Ä‘a, cáº§n lÃ m sÃ¢u sáº¯c hÆ¡n phÃ¢n tÃ­ch Ä‘áº·c Ä‘iá»ƒm tá»«ng segment, liÃªn káº¿t cháº·t cháº½ hÆ¡n giá»¯a persona vÃ  chiáº¿n lÆ°á»£c hÃ nh Ä‘á»™ng (kÃªnh, ná»™i dung, thá»i Ä‘iá»ƒm cá»¥ thá»ƒ), vÃ  báº¯t Ä‘áº§u Ä‘á» cáº­p Ä‘áº¿n viá»‡c Ä‘o lÆ°á»ng ROI.

3.  **Visualization & Storytelling (20%):**
    * **Script lÃ m Ä‘Æ°á»£c:** Táº¡o ra nhiá»u biá»ƒu Ä‘á»“ tÄ©nh quan trá»ng (target distribution, CM, ROC/PR, feature importance, SHAP, K-Means evaluation, cluster distribution, boxplots, ICP).
    * **Cháº¥m Ä‘iá»ƒm (Æ°á»›c lÆ°á»£ng):** 50-65%. Äiá»ƒm máº¡nh lÃ  cÃ³ nhiá»u building blocks. Äá»ƒ cao hÆ¡n, cáº§n ká»ƒ má»™t cÃ¢u chuyá»‡n máº¡ch láº¡c báº±ng cÃ¡c biá»ƒu Ä‘á»“ nÃ y trong bÃ i thuyáº¿t trÃ¬nh. Pháº§n "dashboard prescriptive" vÃ  "scenario analysis" váº«n lÃ  Ä‘iá»ƒm cáº§n phÃ¡t triá»ƒn Ã½ tÆ°á»Ÿng bÃªn ngoÃ i script.

4.  **Business Insights (25%):**
    * **Script lÃ m Ä‘Æ°á»£c:** Insight tá»« SHAP vÃ  cÃ¡c persona Ä‘Ã£ rÃµ rÃ ng hÆ¡n. CÃ¡c Ä‘á» xuáº¥t chiáº¿n lÆ°á»£c dá»±a trÃªn káº¿t quáº£ phÃ¢n tÃ­ch.
    * **Cháº¥m Ä‘iá»ƒm (Æ°á»›c lÆ°á»£ng):** 65-80%. Äá»ƒ xuáº¥t sáº¯c, cáº§n nhá»¯ng insight thá»±c sá»± "Ä‘áº¯t giÃ¡", cÃ³ tÃ­nh á»©ng dá»¥ng cao vÃ  Ä‘á» xuáº¥t cá»¥ thá»ƒ, cÃ³ thá»ƒ kiá»ƒm chá»©ng Ä‘Æ°á»£c cho sÃ n thÆ°Æ¡ng máº¡i Ä‘iá»‡n tá»­.

**Tá»•ng káº¿t:** Script Ä‘Ã£ Ä‘Æ°á»£c cáº£i thiá»‡n Ä‘Ã¡ng ká»ƒ, Ä‘áº·c biá»‡t lÃ  pháº§n tuning. CÃ¡c phÃ¢n tÃ­ch Ä‘Ã£ Ä‘áº§y Ä‘á»§ hÆ¡n vÃ  logic hÆ¡n.

## Nhá»¯ng "ViÃªn Kim CÆ°Æ¡ng" NÃªn "ÄÃ¡nh BÃ³ng" Cho Buá»•i TrÃ¬nh BÃ y (Gá»£i Ã Trá»±c Quan HÃ³a)

Dá»±a trÃªn log cháº¡y `PRODUCTION_TIER = 2` vÃ  `K_SELECTION_METHOD = "silhouette"`:

1.  **Tá»•ng Quan BÃ i ToÃ¡n:**
    * `target_variable_distribution.png`: Tá»· lá»‡ khÃ¡ch hÃ ng quay láº¡i/khÃ´ng quay láº¡i (ná»n táº£ng cá»§a bÃ i toÃ¡n).
2.  **HÃ nh TrÃ¬nh TÃ¬m Kiáº¿m Model Tá»‘t Nháº¥t:**
    * **Báº£ng So SÃ¡nh Model Ban Äáº§u:** (TrÃ­ch tá»« `model_comparison_summary.csv`) Cho tháº¥y sá»± Ä‘a dáº¡ng model Ä‘Ã£ thá»­ vÃ  lÃ m ná»•i báº­t `MLPClassifier_Comp` lÃ  model tá»‘t nháº¥t trÆ°á»›c tuning.
    * **Káº¿t Quáº£ Tuning:**
        * TrÃ¬nh bÃ y ngáº¯n gá»n quÃ¡ trÃ¬nh tuning cá»§a `RandomForest_Comp` vÃ  `MLPClassifier_Comp`, nÃªu báº­t CV AUC vÃ  Validation AUC Ä‘á»ƒ cho tháº¥y sá»± cáº£i thiá»‡n (hoáº·c khÃ´ng) vÃ  viá»‡c kiá»ƒm soÃ¡t overfitting.
        * **Confusion Matrix, ROC Curve, Precision-Recall Curve cá»§a Model Tá»‘t Nháº¥t Cuá»‘i CÃ¹ng (`RandomForest_Comp_Tuned`):** ÄÃ¢y lÃ  báº±ng chá»©ng vá» hiá»‡u suáº¥t cá»§a model báº¡n chá»n.
    * `feature_importances_RandomForest_Comp_Tuned.png`: CÃ¡c yáº¿u tá»‘ model nÃ y cho lÃ  quan trá»ng.
3.  **"BÃ³c TÃ¡ch" Model Vá»›i SHAP:**
    * `shap_summary_plot_RandomForest_Comp_Tuned.png` (dot plot): TÃ¡c Ä‘á»™ng cá»§a cÃ¡c feature lÃªn dá»± Ä‘oÃ¡n.
    * `shap_bar_plot_RandomForest_Comp_Tuned.png`: Feature nÃ o áº£nh hÆ°á»Ÿng máº¡nh nháº¥t theo SHAP.
4.  **KhÃ¡m PhÃ¡ CÃ¡c NhÃ³m KhÃ¡ch HÃ ng:**
    * `kmeans_silhouette_scores.png` (vÃ  cÃ³ thá»ƒ cáº£ `kmeans_elbow_method.png` Ä‘á»ƒ so sÃ¡nh): Giáº£i thÃ­ch táº¡i sao chá»n `k=4` (dá»±a trÃªn Silhouette score cao nháº¥t).
    * `user_segment_distribution.png` (cho `k=4`): Quy mÃ´ cá»§a tá»«ng phÃ¢n khÃºc.
    * `cluster_profiles_boxplots.png` (cho `k=4`): So sÃ¡nh trá»±c quan cÃ¡c Ä‘áº·c Ä‘iá»ƒm chÃ­nh (loyalty, engagement, purchase_rate, total_interactions, churn_risk) giá»¯a 4 phÃ¢n khÃºc.
    * **Báº£ng Tá»•ng Há»£p ChÃ¢n Dung Persona (4 personas):** TrÃ¬nh bÃ y ngáº¯n gá»n Ä‘áº·c Ä‘iá»ƒm ná»•i báº­t vÃ  tÃªn persona cá»§a tá»«ng cá»¥m.
5.  **KhÃ¡ch HÃ ng LÃ½ TÆ°á»Ÿng (ICP):**
    * `ideal_customer_profile_age_dist.png` vÃ  `ideal_customer_profile_sex_dist.png`. CÃ³ thá»ƒ bá»• sung thÃªm biá»ƒu Ä‘á»“ vá» ngÃ nh nghá»/cÃ´ng viá»‡c náº¿u dá»¯ liá»‡u nÃ y cháº¥t lÆ°á»£ng.
6.  **Slide Chiáº¿n LÆ°á»£c:** Dá»±a trÃªn Persona vÃ  ICP, Ä‘á» xuáº¥t cÃ¡c hÃ nh Ä‘á»™ng cá»¥ thá»ƒ.

**LÆ°u Ã½ quan trá»ng cho thuyáº¿t trÃ¬nh:**
* **CÃ¢u chuyá»‡n máº¡ch láº¡c:** Sáº¯p xáº¿p cÃ¡c biá»ƒu Ä‘á»“ Ä‘á»ƒ dáº«n dáº¯t ngÆ°á»i nghe qua quÃ¡ trÃ¬nh phÃ¢n tÃ­ch cá»§a báº¡n, tá»« hiá»ƒu bÃ i toÃ¡n, xÃ¢y dá»±ng model, Ä‘áº¿n khÃ¡m phÃ¡ insight vÃ  Ä‘á» xuáº¥t giáº£i phÃ¡p.
* **Táº­p trung vÃ o Ã½ nghÄ©a:** Äá»«ng chá»‰ trÃ¬nh bÃ y biá»ƒu Ä‘á»“, hÃ£y giáº£i thÃ­ch nÃ³ cho tháº¥y Ä‘iá»u gÃ¬ vÃ  Ã½ nghÄ©a cá»§a nÃ³ Ä‘á»‘i vá»›i bÃ i toÃ¡n cá»§a sÃ n thÆ°Æ¡ng máº¡i Ä‘iá»‡n tá»­.
* **Káº¿t ná»‘i vá»›i barem:** Ngáº§m liÃªn káº¿t cÃ¡c pháº§n trÃ¬nh bÃ y vá»›i cÃ¡c tiÃªu chÃ­ cá»§a ban giÃ¡m kháº£o.

## Lá»i Dáº·n DÃ² Tá»« "TrÆ°á»Ÿng ÄoÃ n ThÃ¡m Hiá»ƒm"

Äá»™i cá»§a chÃºng ta Ä‘Ã£ cÃ³ má»™t "cá»— mÃ¡y khai khoÃ¡ng" ráº¥t máº¡nh máº½ vÃ  nhiá»u "bÃ¡u váº­t" Ä‘Ã£ Ä‘Æ°á»£c tÃ¬m tháº¥y! Láº§n cháº¡y PRODUCTION nÃ y cho tháº¥y script Ä‘Ã£ á»•n Ä‘á»‹nh hÆ¡n, logic cháº·t cháº½ hÆ¡n vÃ  cÃ¡c cáº£i tiáº¿n Ä‘Ã£ phÃ¡t huy tÃ¡c dá»¥ng.

HÃ£y nhá»›, má»¥c tiÃªu cá»§a DAZONE khÃ´ng chá»‰ lÃ  nhá»¯ng con sá»‘ AUC cao ngáº¥t, mÃ  cÃ²n lÃ  kháº£ nÄƒng biáº¿n dá»¯ liá»‡u thÃ nh nhá»¯ng cÃ¢u chuyá»‡n cÃ³ Ã½ nghÄ©a, nhá»¯ng quyáº¿t Ä‘á»‹nh kinh doanh thÃ´ng minh cho sÃ n thÆ°Æ¡ng máº¡i Ä‘iá»‡n tá»­. HÃ£y tá»± tin trÃ¬nh bÃ y nhá»¯ng khÃ¡m phÃ¡ cá»§a Ä‘á»™i! ChÃºc cáº£ Ä‘á»™i thÃ nh cÃ´ng rá»±c rá»¡! ğŸŒŸ
