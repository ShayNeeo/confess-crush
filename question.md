# README: HÃ nh TrÃ¬nh Khai PhÃ¡ Dá»¯ Liá»‡u KhÃ¡ch HÃ ng SÃ n TMÄT - Sá»© Má»‡nh DAZONE 2025 VÃ²ng 2.2


## Má»¥c Lá»¥c

1. [Nhiá»‡m Vá»¥ BÃ­ Máº­t: Hiá»ƒu LÃ²ng KhÃ¡ch HÃ ng, Giá»¯ ChÃ¢n Doanh Thu](#nhiá»‡m-vá»¥-bÃ­-máº­t-hiá»ƒu-lÃ²ng-khÃ¡ch-hÃ ng-giá»¯-chÃ¢n-doanh-thu)
2. [KÃ­ch Hoáº¡t "Cá»— MÃ¡y Thá»i Gian": HÆ°á»›ng Dáº«n Váº­n HÃ nh Script](#kÃ­ch-hoáº¡t-cá»—-mÃ¡y-thá»i-gian-hÆ°á»›ng-dáº«n-váº­n-hÃ nh-script)
3. [Báº£n Thiáº¿t Káº¿ "Cá»— MÃ¡y": Cáº¥u TrÃºc Script vÃ  CÃ¢u Chuyá»‡n Äáº±ng Sau](#báº£n-thiáº¿t-káº¿-cá»—-mÃ¡y-cáº¥u-trÃºc-script-vÃ -cÃ¢u-chuyá»‡n-Ä‘áº±ng-sau)
   * [Tá»•ng Quan Lá»™ TrÃ¬nh KhÃ¡m PhÃ¡](#tá»•ng-quan-lá»™-trÃ¬nh-khÃ¡m-phÃ¡)
   * [ChÆ°Æ¡ng 1: Thu Tháº­p ThÃ´ng Tin TÃ¬nh BÃ¡o - Chuáº©n Bá»‹ Dá»¯ Liá»‡u](#chÆ°Æ¡ng-1-thu-tháº­p-thÃ´ng-tin-tÃ¬nh-bÃ¡o---chuáº©n-bá»‹-dá»¯-liá»‡u)
   * [ChÆ°Æ¡ng 2: Cháº¿ Táº¡o Quáº£ Cáº§u TiÃªn Tri - XÃ¢y Dá»±ng vÃ  ÄÃ¡nh GiÃ¡ Model](#chÆ°Æ¡ng-2-cháº¿-táº¡o-quáº£-cáº§u-tiÃªn-tri---xÃ¢y-dá»±ng-vÃ -Ä‘Ã¡nh-giÃ¡-model)
   * [ChÆ°Æ¡ng 3: Äá»c Vá»‹ Quáº£ Cáº§u & PhÃ¢n Loáº¡i "Chiáº¿n Binh" - PhÃ¢n TÃ­ch SÃ¢u vÃ  Táº¡o ChÃ¢n Dung KhÃ¡ch HÃ ng](#chÆ°Æ¡ng-3-Ä‘á»c-vá»‹-quáº£-cáº§u--phÃ¢n-loáº¡i-chiáº¿n-binh---phÃ¢n-tÃ­ch-sÃ¢u-vÃ -táº¡o-chÃ¢n-dung-khÃ¡ch-hÃ ng)
4. [ÄÃ¡p Ãn Cho "Sáº¿p Tá»•ng": Äá»‘i Chiáº¿u Vá»›i Barem Cháº¥m Äiá»ƒm DAZONE 2025](#Ä‘Ã¡p-Ã¡n-cho-sáº¿p-tá»•ng-Ä‘á»‘i-chiáº¿u-vá»›i-barem-cháº¥m-Ä‘iá»ƒm-dazone-2025)
5. [BÃ¡o CÃ¡o Chiáº¿n CÃ´ng LÃªn "Bá»™ Chá»‰ Huy": Gá»£i Ã Trá»±c Quan HÃ³a Cho BÃ i Thuyáº¿t TrÃ¬nh](#bÃ¡o-cÃ¡o-chiáº¿n-cÃ´ng-lÃªn-bá»™-chá»‰-huy-gá»£i-Ã½-trá»±c-quan-hÃ³a-cho-bÃ i-thuyáº¿t-trÃ¬nh)
6. [ThÃ´ng Äiá»‡p Tá»« "Chá»‰ Huy TrÆ°á»Ÿng" Äá»™i Äáº·c Nhiá»‡m](#thÃ´ng-Ä‘iá»‡p-tá»«-chá»‰-huy-trÆ°á»Ÿng-Ä‘á»™i-Ä‘áº·c-nhiá»‡m)

## Nhiá»‡m Vá»¥ BÃ­ Máº­t: Hiá»ƒu LÃ²ng KhÃ¡ch HÃ ng, Giá»¯ ChÃ¢n Doanh Thu

SÃ n thÆ°Æ¡ng máº¡i Ä‘iá»‡n tá»­ cá»§a chÃºng ta cÃ³ hÃ ng triá»‡u khÃ¡ch hÃ ng. NhÆ°ng, ai trong sá»‘ há» sáº½ thá»±c sá»± gáº¯n bÃ³ vÃ  quay láº¡i mua hÃ ng táº¡i má»™t gian hÃ ng cá»¥ thá»ƒ trong 6 thÃ¡ng tá»›i? ÄÃ¢y khÃ´ng chá»‰ lÃ  má»™t cÃ¢u há»i, mÃ  lÃ  má»™t "nhiá»‡m vá»¥ tá»‘i máº­t" áº£nh hÆ°á»Ÿng trá»±c tiáº¿p Ä‘áº¿n doanh thu vÃ  sá»± phÃ¡t triá»ƒn bá»n vá»¯ng. Náº¿u chÃºng ta biáº¿t Ä‘Æ°á»£c Ä‘iá»u nÃ y, chÃºng ta cÃ³ thá»ƒ:

* ChÄƒm sÃ³c Ä‘Ãºng ngÆ°á»i, Ä‘Ãºng lÃºc.
* Tung ra cÃ¡c chÆ°Æ¡ng trÃ¬nh khuyáº¿n mÃ£i hiá»‡u quáº£ hÆ¡n.
* Biáº¿n khÃ¡ch hÃ ng má»›i thÃ nh khÃ¡ch hÃ ng trung thÃ nh.

"Cá»— mÃ¡y thá»i gian" (script Python nÃ y) sáº½ giÃºp chÃºng ta giáº£i quyáº¿t nhiá»‡m vá»¥ nÃ y báº±ng cÃ¡ch:

1. **"Thu tháº­p vÃ  lÃ m sáº¡ch cÃ¡c máº£nh ghÃ©p quÃ¡ khá»©"**: Chuáº©n bá»‹ dá»¯ liá»‡u giao dá»‹ch vÃ  thÃ´ng tin khÃ¡ch hÃ ng.
2. **"Cháº¿ táº¡o cÃ¡c phiÃªn báº£n quáº£ cáº§u tiÃªn tri"**: XÃ¢y dá»±ng cÃ¡c mÃ´ hÃ¬nh dá»± Ä‘oÃ¡n.
3. **"Kiá»ƒm tra Ä‘á»™ chÃ­nh xÃ¡c cá»§a tá»«ng quáº£ cáº§u"**: ÄÃ¡nh giÃ¡ model nÃ o "phÃ¡n" chuáº©n nháº¥t.
4. **"Nháº­n diá»‡n cÃ¡c nhÃ³m chiáº¿n binh mua sáº¯m"**: PhÃ¢n loáº¡i khÃ¡ch hÃ ng dá»±a trÃªn hÃ nh vi vÃ  Ä‘áº·c Ä‘iá»ƒm.
5. **"Váº¡ch ra káº¿ hoáº¡ch tÃ¡c chiáº¿n"**: Äá» xuáº¥t cÃ¡c chiáº¿n lÆ°á»£c kinh doanh thÃ´ng minh.

## KÃ­ch Hoáº¡t "Cá»— MÃ¡y Thá»i Gian": HÆ°á»›ng Dáº«n Váº­n HÃ nh Script

Äá»ƒ "cá»— mÃ¡y" cá»§a chÃºng ta báº¯t Ä‘áº§u hÃ nh trÃ¬nh xuyÃªn khÃ´ng vá» quÃ¡ khá»© vÃ  dá»± Ä‘oÃ¡n tÆ°Æ¡ng lai, cáº£ Ä‘á»™i cáº§n chuáº©n bá»‹:

1. **"Trang bá»‹ cÃ¡ nhÃ¢n" (MÃ´i trÆ°á»ng):** MÃ¡y tÃ­nh Ä‘Æ°á»£c cÃ i Python vÃ  cÃ¡c "vÅ© khÃ­" cáº§n thiáº¿t (thÆ° viá»‡n) nhÆ° `pandas`, `numpy` (Ä‘á»ƒ xá»­ lÃ½ sá»‘ liá»‡u), `matplotlib`, `seaborn` (Ä‘á»ƒ váº½ biá»ƒu Ä‘á»“), `scikit-learn` (bá»™ cÃ´ng cá»¥ xÃ¢y model), `imblearn` (Ä‘á»ƒ cÃ¢n báº±ng lá»±c lÆ°á»£ng cÃ¡c nhÃ³m khÃ¡ch hÃ ng), `xgboost`, `lightgbm` (2 "chiáº¿n mÃ£" máº¡nh máº½), vÃ  `shap` (kÃ­nh lÃºp soi tháº¥u model).

2. **"Báº£n Ä‘á»“ kho bÃ¡u cá»•" (Dá»¯ liá»‡u Ä‘áº§u vÃ o):** CÃ¡c file CSV Ä‘Ã£ Ä‘Æ°á»£c "lau chÃ¹i" tá»« vÃ²ng trÆ°á»›c hoáº·c tá»« script `data_cleaning.py`, cáº¥t giá»¯ trong `cleaning_results/cleaned_data/`:
   * `competition_train_features.csv`: ThÃ´ng tin huáº¥n luyá»‡n cÃ¡c "nhÃ  tiÃªn tri".
   * `competition_test_features.csv`: ThÃ´ng tin Ä‘á»ƒ "thá»­ tÃ i" cÃ¡c "nhÃ  tiÃªn tri".
   * `cleaned_user_info.csv`: Há»“ sÆ¡ chi tiáº¿t cá»§a tá»«ng khÃ¡ch hÃ ng.

3. **"Niá»‡m tháº§n chÃº" (Cháº¡y script):** Thá»±c thi file `DAZONE2025_R2.2_Main_Analysis.py`.

4. **"Chiáº¿n lá»£i pháº©m" (Káº¿t quáº£):** Má»i "bÃ­ máº­t" vÃ  "kho bÃ¡u" sáº½ Ä‘Æ°á»£c táº­p há»£p táº¡i thÆ° má»¥c `round_2.2`:
   * `model_outputs`: NÆ¡i cáº¥t giá»¯ cÃ¡c "quáº£ cáº§u tiÃªn tri" máº¡nh nháº¥t.
   * `segmentation_outputs`: "Há»“ sÆ¡ máº­t" cá»§a tá»«ng nhÃ³m khÃ¡ch hÃ ng.
   * `shap_outputs`: "Báº£n giáº£i mÃ£" cÃ¡ch "quáº£ cáº§u" Ä‘Æ°a ra dá»± Ä‘oÃ¡n.
   * `visualizations_from_main_analysis`: "Album áº£nh" ghi láº¡i nhá»¯ng khÃ¡m phÃ¡ quan trá»ng.
   * `logs`: "BiÃªn niÃªn sá»­" cá»§a cuá»™c hÃ nh trÃ¬nh.

## Báº£n Thiáº¿t Káº¿ "Cá»— MÃ¡y": Cáº¥u TrÃºc Script vÃ  CÃ¢u Chuyá»‡n Äáº±ng Sau

HÃ nh trÃ¬nh cá»§a chÃºng ta Ä‘Æ°á»£c chia thÃ nh 3 chÆ°Æ¡ng lá»›n, má»—i chÆ°Æ¡ng hÃ© lá»™ má»™t pháº§n cá»§a bá»©c tranh toÃ n cáº£nh vá» khÃ¡ch hÃ ng cá»§a sÃ n thÆ°Æ¡ng máº¡i Ä‘iá»‡n tá»­.

### Tá»•ng Quan Lá»™ TrÃ¬nh KhÃ¡m PhÃ¡

ÄÃ¢y lÃ  bá»©c tranh toÃ n cáº£nh vá» hÃ nh trÃ¬nh cá»§a chÃºng ta, tá»« lÃºc báº¯t Ä‘áº§u vá»›i dá»¯ liá»‡u thÃ´ cho Ä‘áº¿n khi tÃ¬m ra nhá»¯ng "viÃªn ngá»c" insight:

```mermaid
graph TD
    A[Initial Data - CSV Features] --> PREPROC[Preprocessing - Scale, Encode, SMOTE for Initial Train];
    PREPROC --> OPT1_EVAL[Option 1: Train & Evaluate 4 Models on SMOTE Data];
    PREPROC --> OPT2_EVAL[Option 2: Train & Evaluate 6 Models on SMOTE Data];

    OPT1_EVAL --> SELECT_BEST_BASE[Select Best Base Model];
    OPT2_EVAL --> SELECT_BEST_BASE;

    SELECT_BEST_BASE -- Original Scaled Train Data --> RFECV_STEP[RFECV: Feature Selection for Best Base Model];
    RFECV_STEP --> SELECTED_FEATURES[Selected Feature Set];

    SELECTED_FEATURES -- Create X_train_smote_rfe, X_val_rfe --> TUNE_MODEL[Hyperparameter Tuning - RandomizedSearchCV for Best Base Model on X_train_rfe original];
    
    TUNE_MODEL --> FINAL_MODEL((Final Best Tuned Model));
    FINAL_MODEL -- Validation Data X_val_rfe --> EVAL_FINAL[Evaluate Final Tuned Model];

    FINAL_MODEL --> DEPLOY[Goal: Predict Next 6 Months];
    FINAL_MODEL -- Sample Data X_val_rfe or X_train_rfe --> SHAP_ANALYSIS{SHAP Analysis};
    SHAP_ANALYSIS --> IMPORTANT_FEATURES[Important Features via SHAP];

    %% Customer Segmentation Flow (Parallel or Post-Feature Engineering)
    DATA_FOR_SEG[Aggregated Customer Data + Demographics] --> PREPROC_SEG[Preprocessing for Segmentation];
    PREPROC_SEG --> OPTIMAL_K[Determine Optimal K - Elbow/Silhouette];
    OPTIMAL_K --> CLUSTERING[K-Means Clustering];
    CLUSTERING --> SEGMENTS[Customer Segments];
    SEGMENTS -- Combine with 'label' --> PROFILE_SEGMENTS[Evaluate & Profile Segments by Label];

    %% Styling (Optional)
    classDef data fill:#f9f,stroke:#333,stroke-width:2px;
    classDef process fill:#ccf,stroke:#333,stroke-width:2px;
    classDef model fill:#cfc,stroke:#333,stroke-width:2px,color:#000;
    classDef decision fill:#f80,stroke:#333,stroke-width:2px;
    classDef deployment fill:#e7d38f,stroke:#333,stroke-width:2px;
    classDef analysis fill:#d2b4de,stroke:#333,stroke-width:2px;

    class A,SELECTED_FEATURES,DATA_FOR_SEG,IMPORTANT_FEATURES,SEGMENTS,PROFILE_SEGMENTS data;
    class PREPROC,PREPROC_SEG,RFECV_STEP,OPTIMAL_K,CLUSTERING process;
    class OPT1_EVAL,OPT2_EVAL,SELECT_BEST_BASE,TUNE_MODEL,FINAL_MODEL,EVAL_FINAL model;
    class SHAP_ANALYSIS analysis;
    class DEPLOY deployment;
```
# Beautiful ML Workflow Diagram

```mermaid
graph TD
    %% Data Ingestion with icons
    A1["ğŸ“Š CSV: competition_train_features.csv"] --> PROC_TRAIN_FEAT
    A2["ğŸ“Š CSV: competition_test_features.csv"] --> PROC_TEST_FEAT
    A3["ğŸ‘¥ CSV: cleaned_user_info.csv"] --> MERGE_USER_INFO_SEG

    subgraph PART1 ["ğŸ”§ Part 1: Data Preparation"]
        direction TB
        PROC_TRAIN_FEAT["âš™ï¸ Preprocess Train Features<br/>Drop Dates, Encode Categories"] --> DF_TRAIN_ALIGNED["ğŸ“ˆ df_train_aligned<br/><i>Features + Labels</i>"]
        PROC_TEST_FEAT["âš™ï¸ Preprocess Test Features"] --> DF_TEST_ALIGNED["ğŸ“ˆ df_test_aligned"]

        DF_TRAIN_ALIGNED -.-> SPLIT_DATA["ğŸ”€ Train/Validation Split"]
        SPLIT_DATA --> X_TRAIN_RAW["ğŸ¯ X_train_raw"]
        SPLIT_DATA --> Y_TRAIN["ğŸ·ï¸ y_train<br/><i>labels</i>"]
        SPLIT_DATA --> X_VAL_RAW["ğŸ¯ X_val_raw"]
        SPLIT_DATA --> Y_VAL["ğŸ·ï¸ y_val<br/><i>labels</i>"]

        X_TRAIN_RAW --> SCALE_TRAIN["ğŸ“ Scale Features"]
        X_VAL_RAW --> SCALE_VAL["ğŸ“ Scale Features"]
        
        SCALE_TRAIN --> X_TRAIN_SCALED["âœ¨ X_train_scaled<br/><i>~20 features</i>"]
        SCALE_VAL --> X_VAL_SCALED["âœ¨ X_val_scaled<br/><i>~20 features</i>"]

        X_TRAIN_SCALED -.-> SMOTE_INITIAL["ğŸ”„ SMOTE Balancing"]
        SMOTE_INITIAL --> X_TRAIN_SMOTE["âš–ï¸ X_train_smote<br/><i>balanced dataset</i>"]
    end

    subgraph PART2 ["ğŸ¤– Part 2: Model Training & Optimization"]
        direction TB
        
        subgraph EVAL ["ğŸ“Š Initial Model Evaluation"]
            direction LR
            X_TRAIN_SMOTE --> OPT1_EVAL["ğŸ¯ Option 1<br/>4 Base Models"]
            X_TRAIN_SMOTE --> OPT2_EVAL["ğŸ¯ Option 2<br/>6 Models (MLP, SVC)"]
            OPT1_EVAL --> METRICS_OPT1["ğŸ“ˆ Metrics Set 1"]
            OPT2_EVAL --> METRICS_OPT2["ğŸ“ˆ Metrics Set 2"]
            METRICS_OPT1 --> SELECT_BEST_BASE["ğŸ† Select Best<br/>Base Model"]
            METRICS_OPT2 --> SELECT_BEST_BASE
        end

        subgraph FEATURE_SEL ["ğŸ¯ Feature Selection (RFECV)"]
            direction TB
            SELECT_BEST_BASE --> RFECV_STEP["ğŸ” RFECV Analysis<br/>Recursive Feature Elimination"]
            RFECV_STEP --> SELECTED_FEATURES["â­ Selected Features<br/><i>~19 optimal features</i>"]
            X_TRAIN_SCALED -.-> FILTER_TRAIN["ğŸ›ï¸ Filter Features"]
            X_VAL_SCALED -.-> FILTER_VAL["ğŸ›ï¸ Filter Features"]
            SELECTED_FEATURES --> FILTER_TRAIN
            SELECTED_FEATURES --> FILTER_VAL
            FILTER_TRAIN --> X_TRAIN_RFE["ğŸ¯ X_train_rfe<br/><i>scaled + selected</i>"]
            FILTER_VAL --> X_VAL_RFE["ğŸ¯ X_val_rfe<br/><i>scaled + selected</i>"]
        end

        X_TRAIN_RFE -.-> SMOTE_FINAL["ğŸ”„ SMOTE on RFE Data"]
        SMOTE_FINAL --> X_TRAIN_SMOTE_RFE["âš–ï¸ X_train_smote_rfe<br/><i>final training set</i>"]
        
        subgraph TUNING ["âš¡ Hyperparameter Tuning"]
            direction TB
            SELECTED_FEATURES --> TUNE_SETUP["ğŸ› ï¸ Setup Tuning<br/>Top 2 Models"]
            TUNE_SETUP --> TUNE_MODEL_1["ğŸ›ï¸ Tune Model 1<br/><i>e.g., MLP</i>"]
            TUNE_SETUP --> TUNE_MODEL_2["ğŸ›ï¸ Tune Model 2<br/><i>e.g., Random Forest</i>"]
            
            TUNE_MODEL_1 --> TUNED_1["ğŸ”§ Tuned Model 1"]
            TUNE_MODEL_2 --> TUNED_2["ğŸ”§ Tuned Model 2"]

            TUNED_1 -.-> EVAL_1["ğŸ“Š Evaluate Model 1"]
            TUNED_2 -.-> EVAL_2["ğŸ“Š Evaluate Model 2"]
            X_TRAIN_SMOTE_RFE -.-> EVAL_1
            X_TRAIN_SMOTE_RFE -.-> EVAL_2
            X_VAL_RFE -.-> EVAL_1
            X_VAL_RFE -.-> EVAL_2
            
            EVAL_1 --> FINAL_COMPARE["ğŸ† Final Model<br/>Selection"]
            EVAL_2 --> FINAL_COMPARE
            SELECT_BEST_BASE -.-> FINAL_COMPARE
            FINAL_COMPARE --> FINAL_MODEL["ğŸ‘‘ Champion Model<br/><i>e.g., RF_Tuned</i>"]
        end
    end
    
    subgraph PART3 ["ğŸ” Part 3 & 4: Analysis & Insights"]
        direction TB
        
        subgraph SHAP_SECTION ["ğŸ’¡ SHAP Analysis"]
            direction LR
            FINAL_MODEL --> SHAP_ANALYSIS["ğŸ”¬ SHAP Analysis<br/>Feature Importance"]
            X_VAL_RFE -.-> SHAP_ANALYSIS
            SHAP_ANALYSIS --> SHAP_OUTPUT["ğŸ“Š SHAP Visualizations<br/>& Importance Scores"]
        end

        subgraph SEGMENTATION ["ğŸ‘¥ User Segmentation & Personas"]
            direction TB
            DF_TRAIN_ALIGNED --> AGG_BEHAVIOR["ğŸ“Š Aggregate User<br/>Behavior Patterns"]
            AGG_BEHAVIOR --> DATA_MERGE["ğŸ”— Merge Data"]
            MERGE_USER_INFO_SEG --> DATA_MERGE
            DATA_MERGE --> DATA_FOR_SEG["ğŸ¯ Segmentation Dataset"]
            
            DATA_FOR_SEG --> PREPROC_SEG["âš™ï¸ Preprocess &<br/>Scale for Clustering"]
            PREPROC_SEG --> OPTIMAL_K["ğŸ“ˆ Determine Optimal K<br/><i>e.g., K=4</i>"]
            OPTIMAL_K --> KMEANS_CLUSTER["ğŸ¯ K-Means Clustering"]
            KMEANS_CLUSTER --> CLUSTERS["ğŸ‘¥ User Clusters<br/>with Labels"]
            
            CLUSTERS --> CLUSTER_PROFILES["ğŸ“Š Initial Cluster<br/>Profiles"]
            DF_TRAIN_ALIGNED --> USER_LABELS["ğŸ·ï¸ User-Level<br/>Repurchase Labels"]
            
            CLUSTERS --> MERGE_LABELS["ğŸ”— Merge with Labels"]
            USER_LABELS --> MERGE_LABELS
            MERGE_LABELS --> ENHANCED_PROFILES["âœ¨ Enhanced Profiles<br/>with Repurchase Rates"]
            
            ENHANCED_PROFILES --> PERSONA_DEF["ğŸ‘¤ Define Persona<br/>Thresholds"]
            PERSONA_DEF --> PERSONA_ASSIGN["ğŸ­ Assign Personas<br/>to Clusters"]
            PERSONA_ASSIGN --> FINAL_PERSONAS["ğŸ­ Final User Personas<br/>with Segments"]
            
            FINAL_PERSONAS --> PERSONA_ANALYSIS["ğŸ“ˆ Persona Repurchase<br/>Analysis"]
            ENHANCED_PROFILES --> CLUSTER_VIZ["ğŸ“Š Cluster Visualizations"]
            PERSONA_ANALYSIS --> PERSONA_VIZ["ğŸ¨ Persona Visualizations"]
        end
    end

    subgraph PART5 ["ğŸš€ Part 5: Business Impact & Deployment"]
        direction TB
        FINAL_MODEL --> INSIGHTS_GEN["ğŸ’¡ Business Insights<br/>Generator"]
        SHAP_OUTPUT --> INSIGHTS_GEN
        FINAL_PERSONAS --> INSIGHTS_GEN
        PERSONA_ANALYSIS --> INSIGHTS_GEN
        ENHANCED_PROFILES --> INSIGHTS_GEN
        
        INSIGHTS_GEN --> BUSINESS_INSIGHTS["ğŸ“‹ Business Insights<br/>& Recommendations"]
        FINAL_MODEL --> DEPLOY_PLAN["ğŸš€ Deployment Planning<br/>Future Predictions"]
    end    %% Beautiful Styling with Modern Colors
    classDef dataSource fill:#667eea,stroke:#fff,stroke-width:3px,color:#fff,font-weight:bold
    classDef process fill:#f093fb,stroke:#fff,stroke-width:2px,color:#fff,font-weight:bold
    classDef model fill:#4facfe,stroke:#fff,stroke-width:3px,color:#fff,font-weight:bold
    classDef decision fill:#43e97b,stroke:#fff,stroke-width:2px,color:#333,font-weight:bold
    classDef analysis fill:#fa709a,stroke:#fff,stroke-width:2px,color:#fff,font-weight:bold
    classDef deployment fill:#a8edea,stroke:#333,stroke-width:3px,color:#333,font-weight:bold
    classDef champion fill:#ffecd2,stroke:#ff6b6b,stroke-width:4px,color:#333,font-weight:bold
    classDef insights fill:#764ba2,stroke:#fff,stroke-width:3px,color:#fff,font-weight:bold
    classDef intermediate fill:#a8e6cf,stroke:#4ecdc4,stroke-width:2px,color:#333
    classDef metrics fill:#ffd89b,stroke:#333,stroke-width:2px,color:#333,font-weight:bold

    %% Apply classes to nodes
    class A1,A2,A3 dataSource
    class PROC_TRAIN_FEAT,PROC_TEST_FEAT,SCALE_TRAIN,SCALE_VAL,PREPROC_SEG,AGG_BEHAVIOR,MERGE_USER_INFO_SEG,SMOTE_INITIAL,SMOTE_FINAL,FILTER_TRAIN,FILTER_VAL,DATA_MERGE process
    class OPT1_EVAL,OPT2_EVAL,TUNE_MODEL_1,TUNE_MODEL_2,TUNED_1,TUNED_2,KMEANS_CLUSTER,RFECV_STEP,SHAP_ANALYSIS model
    class SELECT_BEST_BASE,FINAL_COMPARE,OPTIMAL_K,PERSONA_DEF,PERSONA_ASSIGN decision
    class CLUSTER_PROFILES,ENHANCED_PROFILES,PERSONA_ANALYSIS,CLUSTER_VIZ,PERSONA_VIZ,SHAP_OUTPUT,BUSINESS_INSIGHTS,INSIGHTS_GEN analysis
    class DEPLOY_PLAN deployment
    class FINAL_MODEL champion
    class DF_TRAIN_ALIGNED,DF_TEST_ALIGNED,X_TRAIN_RAW,Y_TRAIN,X_VAL_RAW,Y_VAL,X_TRAIN_SCALED,X_VAL_SCALED,X_TRAIN_SMOTE,SELECTED_FEATURES,X_TRAIN_RFE,X_VAL_RFE,X_TRAIN_SMOTE_RFE,DATA_FOR_SEG,CLUSTERS,FINAL_PERSONAS,USER_LABELS,SPLIT_DATA,TUNE_SETUP intermediate
    class METRICS_OPT1,METRICS_OPT2,EVAL_1,EVAL_2 metrics
```
